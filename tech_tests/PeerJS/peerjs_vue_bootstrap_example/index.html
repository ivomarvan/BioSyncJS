<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Run PeerJS</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <div id="app" class="container py-5">
    <nav class="navbar navbar-dark bg-primary d-flex justify-content-center">
        <span class="navbar-brand mb-0 h1">PeerJS minimal example runner</span>
    </nav>
      
  <!-- Connection Panel -->
  <div class="card mt-4">
    <div class="card-header">Run two instance in two windows</div>
    <div class="card-body">
      <button onclick="openWindows()" type="button" class="btn btn-success" data-mdb-ripple-init>Open two peers in two windows</button>
    </div>
  </div>

<script>
// Funkce pro generování náhodného ID
function generateId() {
  return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>
    (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)
  );
}

// Funkce pro otevření dvou oken s různými parametry
function openWindows() {
  const id1 = generateId();
  const id2 = generateId();
  const url = "./peer.html";
  window.open(`${url}?my_id=${id1}&partner_id=${id2}&name=A`, '_blank');
  //window.open(`${url}?my_id=${id2}&partner_id=${id1}&name=B`, '_blank');
  window.location.href = `${url}?my_id=${id2}&partner_id=${id1}&name=B`;
}
</script>
</body>
</html>
